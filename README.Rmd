---
output: 
  github_document:
    toc: true
---

clpr
=================

This is an R package with analysis utilities and approaches for a data set of obscured and anonymized Clipper smart card transactions.

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  cache = FALSE,
  comment = "#>",
  message = FALSE,
  error = FALSE,
  warning = FALSE,
  fig.path = "README/README-",
  fig.width=7.3,
  fig.height=5,
  out.width = '100%'
)
```

# Installation

```{r}
if (!require(devtools)) {
    install.packages('devtools')
}
devtools::install_github('bayareametro/clpr')
```

# Background

To help validate the MTC travel model, MTC (David Ory) summarized successive movements made by a single Clipper card within [pre-defined time windows](data-raw/transfer_rules_database.csv).  We refer to these as transfers.  

In this repository, we've moved the scripts and markdown documents around to fit within R Packaging specifications in order to manage maintenance and collaboration around these scripts going forward.  

# Goal

The main scripts are eponymous. They [extract-data](vignettes/extract-data.Rmd), [create interactive pair-wise by tag time difference plots](vignettes/To-and-From-Interactive.Rmd), and [build a database of transfer summaries](vignettes/Build-Transfer-Database.Rmd). 

# Vignettes/Examples

Further background and vignettes (these are in draft form, some may be more useful than others). 

- [Alpha-Test-01---Find-People-for-Random-Weekday.Rmd](vignettes/AlphaTest01---Find-People-for-Random-Weekday.Rmd)
- [Alpha-Test-01---Find-People.Rmd](vignettes/Alpha-Test-01---Find-People.Rmd)
- [Alpha-Test-02---If-A-and-B-and-C-for-Random-Weekday.Rmd](vignettes/Alpha-Test-02---If-A-and-B-and-C-for-Random-Weekday.Rmd)
- [Alpha-Test-02---If-A-and-B-and-C.Rmd](vignettes/Alpha-Test-02---If-A-and-B-and-C.Rmd)
- [Build-Transfer-Database.Rmd](vignettes/Build-Transfer-Database.Rmd)
- [To-and-From-Interactive.Rmd](vignettes/To-and-From-Interactive.Rmd)
- [extract-data.Rmd](vignettes/extract-data.Rmd)

# Resulting Data

The [resulting data](data-raw/Transfers by day by agency pair.csv) is summarized in [this Tableau workbook](data-raw/Clipper Transfers.twb).  

