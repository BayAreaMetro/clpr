
## Data dictionary

| Variable Name                                | Note 1                                                                     | Note 2                                                                                                                                     | Note 3                                                                                                    | Note 4                                                                     | Note 5                                                      | Note 6                                                                       | Note 7                                                                                                                               | 
|------------------------------------------|----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|-------------------------------------------------------------|------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------| 
| ApplicationSerialNumber (K)              | Clipper card number                                                        | used for chaining information                                                                                                              |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| ApplicationTransactionSequenceNumber (L) | this number is incremented every time you use your card                    | putting money on your card increments this number -- this is the reason you may see a number skipped in the transactions table             | 1 is initialization                                                                                       |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| GenerationTime (H)                       | Date/time field for when Clipper interacted with the system                | UTC                                                                                                                                        | [subtract 8 hours (or 7 in the summer) to get local time](https://github.com/BayAreaMetro/clpr/blob/master/inst/sql/day_fares.sql#L4)                                                   | [subtract 11 hours (or 10 in the summer) to get the date of service](https://github.com/BayAreaMetro/clpr/blob/master/R/extract.R#L67-L70)         | this is because the end of date is 3 o'clock in the morning |                                                                              |                                                                                                                                      | 
| OperatorID (B)                           | decoded in Participant parameter table (almost alphabetical)               |                                                                                                                                            |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| RecordType (I)                           | what type of record (in transaction table it will be 1)                    |                                                                                                                                            |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| Subtype (J)                              | a lot of 4's and 5's -> 4 is tagging into BART, 5 is tagging out of BART   | BART is only "closed tag system"                                                                                                           | 2/3 -> Caltrain                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| PurseAmount (V)                          | amount deducted from purse -- different based on operator                  | Ex) rows 2 and 3                                                                                                                           | subtype = 4 (entrance on bart), purse amount = 0 (nothing deducted                                        | subtype = 5 (exit from bart), purse amount = 2.85 (2.85 deducted for trip) | Ex2) rows 80 and 81                                         | subtype = 2 (entrance on caltrain), purse amount = 12.75 (max fare deducted) | subtype = 3 (exit from caltrain), purse amount = 4 (refund of max fare - actual fare. So the price of his fare was 12.75 - 4 = 8.75) | 
| RideAnnulled (AA)                        | means there is a refund                                                    | For example, check rows 8 and 9                                                                                                            |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| GenerationTime (H)                       | time of transaction in which clipper card interacted with reader           | subtract generation times to get trip time in 2 tag system                                                                                 |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| StartTime (AE)                           | time trip began                                                            | will be the same as the Generation Time if it's a 1 tag system. If it's the second in a 2 tag system, will be the same as the previous tag | this is only different on those transactions where there is a corresponding tag in                        |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| RouteID (F)                              | bus route                                                                  | corresponds to Route parameter table                                                                                                       | not always reliable or useful bc it relies on bus drivers to input it into the system                     | A useful compound key is ParticipantID||routeID                            |                                                             |                                                                              |                                                                                                                                      | 
| ContractID (O)                           | type of payment product                                                    | OperatorID||ContractID                                                                                                                     | decoded in Product/Contract type map parameter table, then there is a Product description parameter table |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| GenericECashPurseBalance (U)             | in Dollars                                                                 |                                                                                                                                            |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| GenericECashPurseAmount (T)              | in Cents                                                                   | amount of money refunded                                                                                                                   | wether it is a deduction vs balance is indicated by the subtype                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| OriginLocation (AB)                      | maps to Location Parameter table via participantID and LocationID          | refers to stations or zones                                                                                                                |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| DestinationLocation (AC)                 | same mapping as OriginLocation but only shows up if 2nd in dual tag system | 65535 means its the tag in in a dual tag system (again look at subtype to figure this out)                                                 |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 
| ProductCategory (Q)                      | eCash vs Product vs Ridebook                                               |                                                                                                                                            |                                                                                                           |                                                                            |                                                             |                                                                              |                                                                                                                                      | 

## Notes

* Berkeley institution ID's don't go into effect on this table until august 1, 2017
